# Generated by Butane; do not edit
apiVersion: machineconfiguration.openshift.io/v1
kind: MachineConfig
metadata:
  labels:
    machineconfiguration.openshift.io/role: master
  name: 50-master-dnsmasq-configuration
spec:
  config:
    ignition:
      version: 3.2.0
    storage:
      files:
        - contents:
            compression: gzip
            source: data:;base64,H4sIAAAAAAAC/0pMSSlKLS621U8sKCjWK0ktLtFNziktLkkt0itKTclILNFLzs/VN7Q00jM0s9AzNDLTMzTgQtKUqZuZV0KOPmL1AAIAAP//6mynxKEAAAA=
          mode: 420
          overwrite: true
          path: /etc/dnsmasq.d/single-node.conf
        - contents:
            compression: gzip
            source: data:;base64,H4sIAAAAAAAC/3yRb0vDMBDGX7ef4oxlKNjeOmQo0hcqGwz2DyciOClZel3K1qQkWVXYhxecY2Uy8+7J87vjubvzM1wUChfcSp8+K20cDKYJi287Udy9ieJON4rbbG893M966VNvNhm+pI+TcT9Bs1E4JvehzWrEFV+SQUNWr+tIaJX7RQ5vwIIOgwRYJkV1HQrJ1ZIYvMN2e2R2T5mb6s+X0EqRcEVduK9D2R04Scr3fvM+j6ZpfzDsJcFFuXJUVoDkBObaCMqUTRtRo9efd+l7ogIIjieFYN/L94QsdQZhaCgnQ0pQ8i9uKYOwgJCAWXRkXSjWG+vIRIYyyV0kdInIYO57O8YSN0ICtuAEDQe6fYWKl2TJ1GTQNkULgsF0rlrImmnK+qB222jeKy++AwAA//98xDVLEQIAAA==
          mode: 365
          overwrite: true
          path: /etc/NetworkManager/dispatcher.d/forcedns
        - contents:
            compression: ""
            source: data:,%5Bmain%5D%0Arc-manager%3Dunmanaged
          mode: 420
          overwrite: true
          path: /etc/NetworkManager/conf.d/single-node.conf
    systemd:
      units:
        - contents: |
            [Unit]
            Description=Run dnsmasq to provide local dns for Single Node OpenShift
            Before=kubelet.service crio.service
            After=network.target

            [Service]
            ExecStart=/usr/sbin/dnsmasq -k

            [Install]
            WantedBy=multi-user.target
          enabled: true
          name: dnsmasq.service
